<!DOCTYPE HTML>
<html>
<head>
<title>«Community`s Shared Scripts» SQF-Library - /css/lib/common.sqf</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<style>
  html {
    font-family: Helvetica, Arial, sans-serif;
  }
  body {
    margin: auto;
    width: 50em;
  }
  * {
    cursor: default;
  }
  pre {
    padding: 1em 0;
  }
  pre.code,
  pre.code b,
  pre.code i,
  pre.code s,
  pre.code u,
  pre.code tt,
  pre.code em,
  pre.code var {
    text-decoration: none;
    font: normal normal 14px/150% "Consolas", monospace;
  }
  pre.code b  { color: #009; }
  pre.code i  { color: #080; }
  pre.code s  { color: #BBB; font-style: italic; }
  pre.code u  { color: #0A0; }
  pre.code tt { color: #994; }
  pre.code em { color: #A00; }
  pre.code var { color: #5E5E5E; }

  hr {
    margin: 1em 0 .1em 0;
    border: 1px dashed #EEE;
  }
  #unfoldcode:hover {
    cursor: hand;
    color: red
  }
  h2, h3, h4 {
    margin: .5em 0;
  }
  h2 {
    margin: 0;
    padding: .2em .1em;
    background: #EEE;
  }
</style>
</head>
<body>
<h1>/css/lib/common.sqf</h1>
<p><small><i>This documentation was generated automatically from the source code.</i></small></p>
<pre class="code">
<hr /><h2>Function func(AddAction)</h2>
<strong>Syntax:
</strong>    _actionID = [
        object, title, function
        (, arguments, priority, showWindow, hideOnUse, shortcut, condition)
    ] invoke(AddAction)

<strong>Description:
</strong>    Function func(AddAction), it is wrapper over addAction for sqf-function directly usage.

<strong>Parameters:
</strong>    0) Object object             â€” The object which the action is assigned to
    1) String (or Text) title    â€” The action name which is displayed in the action menu.
    2) Code (or String) function â€” sqf-function (or sqf-file) that is called when the action is activated.
       Parameters of the called script upon activation:
         [target, caller, actionID (, arguments)]
             0) Object target      â€” the object which the action is assigned to
             1) Object caller      â€” the unit that activated the action
             2) Number actionID    â€” ID of the activated action
             3) Anything arguments â€” arguments given to the script if you are using the extended syntax
Optional parameters:
    3) Anything arguments  â€” Arguments to pass to the script (will be (_this select 3) for the script)
    4) Number   priority   â€” Priority value of the action. Actions will be arranged descending according
       to this. Every game action has a preset priority value. Value can be negative or decimal.
       Actions with same values will be arranged in order which they were made, newest at the bottom.
       Typical range is 0 (low priority. Eg: 'Get out') to 6 (high priority. Eg: 'Auto-hover on').
    5) Boolean  showWindow â€” If set True; players see &quot;Titletext&quot;. At mid-lower screen, as they
       approach the object. False turns it off.
    6) Boolean  hideOnUse  â€” If set to true, it will hide the action menu after selecting that action.
       If set to false, it will leave the action menu open and visible after selecting that action,
       leaving the same action highlighted, for the purpose of allowing you to reselect that
       same action quickly, or to select another action.
    7) String   shortcut   â€” One of the key names defined in bin.pbo (e.g. &quot;moveForward&quot;). Default: &quot;&quot;
    8) String   condition  â€” Code that must return true for action to be shown.
       Special variables &quot;_target&quot; (unit to which action is attached to) and &quot;_this&quot; (caller/executing unit)
       can be used in the evaluation. Default: true

Return value:
    Number or Nothing.
    The ID of the action is returned, IDs are incrementing. The first given action to each unit has got
    the ID 0, the second the ID 1 etc. ID's are also passed to the called script and used
    to remove an action with removeAction.

<strong>Snippet:
</strong>    _actionID = [
        _unit, localize &quot;str/module name/action name&quot;, {
           // action handler
            _target    = arg(0);
            _caller    = arg(1);
            _actionID  = arg(2);
            _arguments = arg(3);
        }
        //, arguments
        //, priority
        //, showWindow
        //, hideOnUse
        //, shortcut
        //, condition
    ] invoke(AddAction);<hr /><h2>Function func(CallOnOneTick)</h2>
<strong>Syntax:
</strong>    _result = [_sqfFunction, _arguments] invoke(CallOnOneTick)
<strong>Description:
</strong>    Executes given sqf-code in non scheduling environment.<hr /><h2>Function func(GetAspectRatio)</h2>
<strong>Syntax:
</strong>    invoke(GetAspectRatio)
<strong>Description:
</strong>    Get current aspect ratio (coefficient).
    For example: 16/9 == 1.(7), 1280/960 or 4/3 == 1.(3)<hr /><h2>Function func(NumToRadix)</h2>
<strong>Syntax:
</strong>     [number (, radix (, minwidth (, maxwidth))))] invoke(NumToRadix)<hr /><h2>Function func(RGB2HTMLColor)</h2>
<strong>Syntax:
</strong>     [number red, number green, number blue] invoke(RGB2HTMLColor)
Returns html-style color string<hr />
<a
  href="#unfoldcode"
  id="unfoldcode"
  onclick="
    var el = document.getElementById('sqfsrc');
    el.style.display = el.style.display == '' ? 'none' : ''
  "
>Source of &ldquo;css/lib/common.sqf&rdquo;</a>
<div style='display: none' id='sqfsrc'>
<h2>&ldquo;css/lib/common.sqf&rdquo;</h2>


<s>// SQF
//
// sqf-library "\css\lib\common.sqf"
// Copyright (c) 2012 Denis Usenko (DenVdmj)
// MIT-style license
//</s>

<em>#include "\css\css"</em>
<em>#define</em><em> __PATH__</em> \css\lib

<s>//
// Function func(AddAction)
// Syntax:
//     _actionID = [
//         object, title, function
//         (, arguments, priority, showWindow, hideOnUse, shortcut, condition)
//     ] invoke(AddAction)
//
// Description:
//     Function func(AddAction), it is wrapper over addAction for sqf-function directly usage.
//
// Parameters:
//     0) Object object             — The object which the action is assigned to
//     1) String (or Text) title    — The action name which is displayed in the action menu.
//     2) Code (or String) function — sqf-function (or sqf-file) that is called when the action is activated.
//        Parameters of the called script upon activation:
//          [target, caller, actionID (, arguments)]
//              0) Object target      — the object which the action is assigned to
//              1) Object caller      — the unit that activated the action
//              2) Number actionID    — ID of the activated action
//              3) Anything arguments — arguments given to the script if you are using the extended syntax
// Optional parameters:
//     3) Anything arguments  — Arguments to pass to the script (will be (_this select 3) for the script)
//     4) Number   priority   — Priority value of the action. Actions will be arranged descending according
//        to this. Every game action has a preset priority value. Value can be negative or decimal.
//        Actions with same values will be arranged in order which they were made, newest at the bottom.
//        Typical range is 0 (low priority. Eg: 'Get out') to 6 (high priority. Eg: 'Auto-hover on').
//     5) Boolean  showWindow — If set True; players see "Titletext". At mid-lower screen, as they
//        approach the object. False turns it off.
//     6) Boolean  hideOnUse  — If set to true, it will hide the action menu after selecting that action.
//        If set to false, it will leave the action menu open and visible after selecting that action,
//        leaving the same action highlighted, for the purpose of allowing you to reselect that
//        same action quickly, or to select another action.
//     7) String   shortcut   — One of the key names defined in bin.pbo (e.g. "moveForward"). Default: ""
//     8) String   condition  — Code that must return true for action to be shown.
//        Special variables "_target" (unit to which action is attached to) and "_this" (caller/executing unit)
//        can be used in the evaluation. Default: true
//
// Return value:
//     Number or Nothing.
//     The ID of the action is returned, IDs are incrementing. The first given action to each unit has got
//     the ID 0, the second the ID 1 etc. ID's are also passed to the called script and used
//     to remove an action with removeAction.
//
// Snippet:
//     _actionID = [
//         _unit, localize "str/module name/action name", {
//            // action handler
//             _target    = arg(0);
//             _caller    = arg(1);
//             _actionID  = arg(2);
//             _arguments = arg(3);
//         }
//         //, arguments
//         //, priority
//         //, showWindow
//         //, hideOnUse
//         //, shortcut
//         //, condition
//     ] invoke(AddAction);
//</s>

<var>func(AddAction)</var> <b>= {
    private [</b><i>"_lOperand"</i><b>,</b> <i>"_rOperand"</i><b>,</b> <i>"_function"</i><b>];</b>
    <var>_lOperand</var> <b>=</b> <var>_this</var> <em>select</em> 0<b>;</b>
    <var>_rOperand</var> <b>= [];</b>
    <s>// copy parameters from _this to _rOperand</s>
    <b>for</b> <i>"_i"</i> <b>from</b> 1 <b>to</b> <em>count</em> <var>_this</var>-1 <b>do {</b>
        <var>_rOperand</var> <em>set</em> <b>[</b><em>count</em> <var>_rOperand</var><b>,</b> <var>_this</var> <em>select</em> <var>_i</var><b>]
    };</b>
    <var>_function</var> <b>=</b> <var>_rOperand</var> <em>select</em> 1<b>;
    if (</b><em>typeName</em> <var>_function</var> <b>!=</b> <i>"CODE"</i><b>) then {</b>
        <var>_function</var> <b>=</b> <em>compile</em> <em>preprocessFileLineNumbers</em> <var>_function</var><b>;
    };</b>
    <s>// change &lt;arguments> parameter [function, arguments]</s>
    <var>_rOperand</var> <em>set</em> <b>[</b>2<b>, [</b><var>_function</var><b>,</b> <var>_rOperand</var> <em>select</em> 2<b>]];</b>
    <s>// change &lt;filename> parameter</s>
    <var>_rOperand</var> <em>set</em> <b>[</b>1<b>,</b> <i>'__PATH__\action.sqs'</i><b>];</b>
    <s>// add action</s>
    <var>_lOperand</var> <em>addAction</em> <var>_rOperand</var><b>;
};</b>

<s>//
// Function func(CallOnOneTick)
// Syntax:
//     _result = [_sqfFunction, _arguments] invoke(CallOnOneTick)
// Description:
//     Executes given sqf-code in non scheduling environment.
//</s>

<var>func(CallOnOneTick)</var> <b>= {</b>
    <var>_this</var> <b>= [</b><var>_this</var><b>, nil, false];</b>
    <var>_this</var> <b>exec</b> <i>'__PATH__\executor.sqs'</i><b>;</b>
    <em>waitUntil</em> <b>{</b><var>_this</var> <em>select</em> 2<b>};</b>
    <var>_this</var> <em>select</em> 1<b>;
};</b>

<s>//
// Function func(GetAspectRatio)
// Syntax:
//     invoke(GetAspectRatio)
// Description:
//     Get current aspect ratio (coefficient).
//     For example: 16/9 == 1.(7), 1280/960 or 4/3 == 1.(3)
//</s>

<var>func(GetAspectRatio)</var> <b>= (
    if (</b><em>count</em> <em>supportInfo</em> <i>"*:getResolution"</i> <b>!=</b> 0<b>) then {{</b>
        <em>getResolution</em> <em>select</em> 4
    <b>}} else {{
        (</b><em>safeZoneW</em> * 4<b>)</b> /
        <b>(</b><em>safeZoneH</em> * 3<b>)
    }}
);</b>

<s>//
// Function func(NumToRadix)
// Syntax:
//      [number (, radix (, minwidth (, maxwidth))))] invoke(NumToRadix)
//</s>

<var>func(NumToRadix)</var> <b>= {
    private [</b><i>'_base36chars'</i><b>,</b> <i>'_number'</i><b>,</b> <i>'_radix'</i><b>,</b> <i>'_minwidth'</i><b>,</b> <i>'_maxwidth'</i><b>,</b> <i>'_string'</i><b>];</b>
    <var>_base36chars</var> <b>=</b> <em>toArray</em> <i>'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ'</i><b>;</b>
    <var>_number</var> <b>= arg(</b>0<b>);</b>
    <var>_radix</var> <b>= argOr(</b>1<b>,</b>16<b>);</b>
    <em>assert</em> <b>(</b><var>_radix</var> <b>>=</b> 2 <b>&amp;&amp;</b> <var>_radix</var> <b>&lt;=</b> 36<b>);
    if (</b><var>_radix</var> &lt; 2 <b>||</b> <var>_radix</var> > 36<b>) exitwith {</b> <i>"illegal radix"</i> <b>};</b>
    <var>_minwidth</var> <b>= argOr(</b>2<b>,</b>1<b>);</b>
    <var>_maxwidth</var> <b>= argOr(</b>3<b>,</b><tt>__mathInf</tt><b>);</b>
    <var>_string</var> <b>=</b> <i>''</i><b>;
    for</b> <i>""</i> <b>from</b> 1 <b>to</b> 10000 <b>do {
        if (</b><var>_maxwidth</var> <b>&lt;=</b> 0<b>) exitwith {};
        if (</b><var>_number</var> <b>&lt;=</b> 0 <b>&amp;&amp;</b> <var>_minwidth</var> <b>&lt;=</b> 0<b>) exitwith {};</b>
        <var>_string</var> <b>=</b> <em>toString</em> <b>[</b><var>_base36chars</var> <em>select</em> <b>(</b><var>_number</var> % <var>_radix</var><b>)]</b> + <var>_string</var><b>;</b>
        <var>_number</var> <b>=</b> <em>floor</em> <b>(</b><var>_number</var>/<var>_radix</var><b>);
        _(</b>minwidth<b>)</b>-1<b>;
        _(</b>maxwidth<b>)</b>-1<b>;
    };</b>
    <var>_string</var>
<b>};</b>

<s>//
// Function func(RGB2HTMLColor)
// Syntax:
//      [number red, number green, number blue] invoke(RGB2HTMLColor)
// Returns html-style color string
//</s>

<var>func(RGB2HTMLColor)</var> <b>= {</b>
    <i>"#"</i> +
    <b>([
        (((</b><em>round</em> <b>arg(</b>0<b>))</b> <em>min</em> 0xff<b>)</b> <em>max</em> 0<b>)</b> * 0x10000 +
        <b>(((</b><em>round</em> <b>arg(</b>1<b>))</b> <em>min</em> 0xff<b>)</b> <em>max</em> 0<b>)</b> * 0x100 +
        <b>(((</b><em>round</em> <b>arg(</b>2<b>))</b> <em>min</em> 0xff<b>)</b> <em>max</em> 0<b>),</b>
        16<b>,</b> 6<b>,</b> 6
    <b>] invoke(</b>NumToRadix<b>))
};</b>


<hr />
</pre>
<p><small><i>This documentation was generated automatically from the source code.</i></small></p>
</body>
</html>
